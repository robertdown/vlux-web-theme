{{- $sassOptions := dict "targetPath" "css/style.css" "enableSourceMap" true "outputStyle" "expanded" "precision" 6 -}}
{{/*- $postcssOptions := dict "use" "autoprefixer" "noMap" true -*/}}

<link rel="stylesheet" href="http://use.typekit.net/kej5ezk.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Libre+Franklin:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

{{ if eq hugo.Environment "production" -}}
  {{- $sassOptions = merge $sassOptions (dict "outputStyle" "compressed") -}}
{{- end -}}

{{ $css := resources.Get "sass/main.scss" | toCSS $sassOptions -}}

{{ if eq (hugo.Environment) "development" -}}
  <link rel="stylesheet" href="{{ $css.RelPermalink | relURL }}" media="screen">
{{ else -}}
  {{ $secureCSS := $css | resources.Fingerprint "sha512" -}}
  <link rel="stylesheet" href="{{ $secureCSS.RelPermalink }}" media="screen" integrity="{{ $secureCSS.Data.Integrity }}" crossorigin="anonymous">
{{ end -}}